#### shuffle优化

自定义分区

环形缓冲区大小和阈值

归并文件数

combiner 预聚合

压缩

增大reducetask 的缓存

reducetask 内存：CPU = 4：1

reducetask拉取数据的并行度

缓存占reducetask的比例

reducetask内存上限



#### yarn优化

调度器处理NM的线程数

yarn自动检测硬件false

把虚拟核数当做物理核数false

物理核数和虚拟核数的比例  1：2

NM内存数默认8G ，

NM分配的核数

物理内存检测true，虚拟内存检测false

container内存《1，8》

containerCPU核数《1，4》



### Maxwell

实时同步

为什么选择Maxwell？

支持断点续传，



### datax

离线批量同步为什么不选Maxwell？同步速度慢

为什么不用sqoop？

datax不适合数据量特别大的场景，数据量不是特别大时速度快

datax**数据量**

10万 * 10~20条 * 1k = 1~2G

调优：增加内存，增加线程数



### DS

任务执行时间？

日志数据： 00：30

业务数据： 00：10

任务挂了怎么办？

睿象云告警

把任务重试

跑了多少指标？



项目中执行各省份交易总额指标时出现了数据倾斜，查看执行状况发现任务卡在reduce阶段一直不能结束，在开启hive.groupby.skewindata = true，双重聚合后解决

一般都发生在Sql中group by和join on上

现象：单个Executor执行时间特别久，整体任务卡在某个阶段不能结束

dim dwd清洗解析数据，在后面的分析计算就不需要再处理了

加购到支付平均使用时长

